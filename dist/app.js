// Generated by CoffeeScript 1.10.0
(function() {
  var episodes, movies, restify, seasons, server, shows;

  restify = require('restify');

  movies = require('./movies/movies');

  shows = require('./shows/shows');

  seasons = require('./shows/seasons');

  episodes = require('./shows/episodes');

  server = restify.createServer();

  server.use(restify.queryParser());


  /*
   * to add basic http-header authorization un-comment this
  server.pre( (req, res, next) ->
      console.log(JSON.stringify(req.headers,null,4))
      if req.headers["authorization"] == 'your secret'
          return next()
      res.status(401)
      res.end()
  )
   */

  server.pre(restify.pre.sanitizePath());

  server.get('/movies', movies.getMultiple);

  server.get('/movies/:trakt_id', movies.get);

  server.get('/shows', shows.getMultiple);

  server.get('/shows/:trakt_id', shows.get);

  server.get('/shows/:trakt_id/seasons', seasons.getMultiple);

  server.get('/shows/:trakt_id/seasons/:season_number', seasons.get);

  server.get('/shows/:trakt_id/seasons/:season_number/episodes', episodes.getMultiple);

  server.get('/shows/:trakt_id/seasons/:season_number/episodes/:episode_number', episodes.get);

  server.pre(restify.pre.userAgentConnection());

  server.listen(8080, '127.0.0.1', function() {
    return console.log('%s listening at %s', server.name, server.url);
  });

}).call(this);
