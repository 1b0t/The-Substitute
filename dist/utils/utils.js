// Generated by CoffeeScript 1.10.0
(function() {
  var config;

  config = require('../config.json');

  module.exports = {
    buildURLwithOptions: function(options) {
      return options.host + options.path;
    },
    merge: function(result) {
      var assetName, assets, i, j, k, len, len1, len2, priorities, ref, ref1, ref2, ref3, results, service;
      if ((config.merge_assets != null) && config.merge_assets === true) {
        result["images"] = {};
        if (config.merge_priority_defaults != null) {
          ref = config.merge_priority_defaults;
          for (i = 0, len = ref.length; i < len; i++) {
            service = ref[i];
            if (result[service] != null) {
              ref1 = result[service];
              for (assetName in ref1) {
                assets = ref1[assetName];
                if (assetName !== "service") {
                  result["images"][assetName] = assets;
                }
              }
            }
          }
        }
        ref2 = config.merge_prioritys;
        for (assetName in ref2) {
          priorities = ref2[assetName];
          for (j = 0, len1 = priorities.length; j < len1; j++) {
            service = priorities[j];
            if ((result[service] != null) && (result[service][assetName] != null)) {
              result["images"][assetName] = result[service][assetName];
              break;
            }
          }
        }
      }
      if (config.merge_priority_defaults != null) {
        ref3 = config.merge_priority_defaults;
        results = [];
        for (k = 0, len2 = ref3.length; k < len2; k++) {
          service = ref3[k];
          results.push(delete result[service]);
        }
        return results;
      }
    }
  };

}).call(this);
